CREATE TABLE article (id BIGINT AUTO_INCREMENT, title VARCHAR(255) COMMENT 'Tieu de bai viet', description LONGTEXT COMMENT 'Mô tả ngắn', content LONGTEXT NOT NULL COMMENT 'Noi dung bai viet', image_path VARCHAR(255) COMMENT 'duong dan anh minh hoa bai viet', status TINYINT DEFAULT 0 NOT NULL COMMENT '0: khong hien thi, 1: hien thi', group_id BIGINT COMMENT 'id nhom tuong ung cua bai viet', meta_title VARCHAR(255) COMMENT 'meta title', meta_keyword VARCHAR(255) COMMENT 'meta keyword', meta_description VARCHAR(255) COMMENT 'meta description', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX article_id_index_idx (id), UNIQUE INDEX article_sluggable_idx (slug, title), INDEX group_id_idx (group_id), PRIMARY KEY(id)) COMMENT = 'Bang luu thong tin bai viet' DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE article_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL COMMENT 'Ten nhom', description TEXT COMMENT 'Mo ta', is_active TINYINT(1) DEFAULT '0' COMMENT 'false: Khong kich hoat - true: Kich hoat', position VARCHAR(255) COMMENT 'vi tri hien thi', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) COMMENT = 'Bang luu thong tin nhom bai viet' DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE category (id BIGINT AUTO_INCREMENT, name VARCHAR(255) COMMENT 'Ten danh muc', description VARCHAR(255) COMMENT 'Mô tả', is_active TINYINT COMMENT '0: an, 1: hien thi', priority BIGINT DEFAULT 10 COMMENT 'Do uu tien', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX phone_option_id_index_idx (id), UNIQUE INDEX category_sluggable_idx (slug, name), PRIMARY KEY(id)) COMMENT = 'Bang luu danh mục sản phẩm' DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE customer_order (id BIGINT AUTO_INCREMENT, status TINYINT DEFAULT 0 COMMENT '0: Don hang moi tao, 1..', full_name VARCHAR(255) COMMENT 'Ten khach hang', phone_number VARCHAR(20) COMMENT 'So dien thoai khach hang', city_id BIGINT COMMENT 'Thanh pho cua khach hang', address VARCHAR(255) COMMENT 'Dia chi khach hang', note LONGTEXT COMMENT 'Ghi chu cua khach hang', payment_type BIGINT COMMENT 'Hình thức thanh toán', total_price DECIMAL(18, 2) DEFAULT 0 COMMENT 'Tong so tien cua don hang', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX customer_order_id_index_idx (id), PRIMARY KEY(id)) COMMENT = 'Bang luu thong tin don hang' DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE detail_order (id BIGINT AUTO_INCREMENT, order_id BIGINT COMMENT 'So id don hang', product_id BIGINT COMMENT 'id san pham', product_name BIGINT COMMENT 'ten san pham', price DECIMAL(18, 2) DEFAULT 0 COMMENT 'Gia san pham', quantity BIGINT COMMENT 'Số lượng', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX sim_order_order_id_index_idx (order_id), PRIMARY KEY(id)) COMMENT = 'Bang luu thong tin điện thoại thuoc don hang' DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE product (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL COMMENT 'Tên sản phẩm', image_path VARCHAR(255) COMMENT 'Ảnh đại diện', price DECIMAL(20, 2) NOT NULL COMMENT 'Gia tien', old_price DECIMAL(20, 2) COMMENT 'Gia tien truoc day', description LONGTEXT COMMENT 'Mô tả', content LONGTEXT COMMENT 'Nội dung chi tiết', status MEDIUMINT COMMENT 'Trạng thái của sản phẩm', priority BIGINT DEFAULT 10 COMMENT 'Do uu tien', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), UNIQUE INDEX product_sluggable_idx (slug, name), PRIMARY KEY(id)) COMMENT = 'Bang luu thong tin sản phẩm' DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE product_category (id BIGINT AUTO_INCREMENT, product_id BIGINT COMMENT 'Ten nha mang', category_id BIGINT COMMENT 'Mo ta', INDEX product_id_idx (product_id), INDEX category_id_idx (category_id), PRIMARY KEY(id)) COMMENT = 'Bang luu thong tin san pham thuoc danh muc' DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sessions_admin (sess_id VARCHAR(64), sess_data LONGTEXT NOT NULL, sess_time BIGINT NOT NULL, sess_userid BIGINT, PRIMARY KEY(sess_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE vt_user_signin_lock (id BIGINT AUTO_INCREMENT, user_name VARCHAR(255), created_time BIGINT, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_forgot_password (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, unique_key VARCHAR(255), expires_at DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_permission (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (id BIGINT AUTO_INCREMENT, user_id BIGINT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user (id BIGINT AUTO_INCREMENT, first_name VARCHAR(255), last_name VARCHAR(255), phone VARCHAR(15), email_address VARCHAR(255) UNIQUE, username VARCHAR(255) NOT NULL UNIQUE, algorithm VARCHAR(255) DEFAULT 'sha1' NOT NULL, salt VARCHAR(255), password VARCHAR(255), is_active TINYINT(1) DEFAULT '0', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, pass_update_at DATETIME COMMENT 'thoi gian update mat khau', is_lock_signin TINYINT(1) COMMENT 'Trang thai: 1 - bi khoa tai khoan, 0 - ko bi khoa', locked_time BIGINT COMMENT 'Thoi diem khoa tai khoan', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id BIGINT, group_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
ALTER TABLE article ADD CONSTRAINT article_group_id_article_group_id FOREIGN KEY (group_id) REFERENCES article_group(id) ON DELETE SET NULL;
ALTER TABLE product_category ADD CONSTRAINT product_category_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id);
ALTER TABLE product_category ADD CONSTRAINT product_category_category_id_category_id FOREIGN KEY (category_id) REFERENCES category(id);
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
